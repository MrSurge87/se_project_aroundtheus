!function(){"use strict";class e{constructor(e,t,s){let{handleImageClick:i,handleDeleteClick:r,handleCardLike:n}=s;this._name=e.name,this._link=e.link,this.isLiked=e.isLiked,this.id=e._id,this._cardSelector=t,this._handleImageClick=i,this._handleDeleteClick=r,this._handleCardLike=n}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>this._handleCardLike(this))),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>this._handleDeleteClick(this)))}setLikeStatus(e){this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._cardElement.querySelector(".card__like-button").classList.add("card__like-button_active"):this._cardElement.querySelector(".card__like-button").classList.remove("card__like-button_active")}removeCard(){this._cardElement.remove()}getCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.style.backgroundImage=`url(${this._link})`,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardImage.addEventListener("click",this._handleImageClick),this._setEventListeners(),this._renderLikes(),this._cardElement}getId(){return this.id}}class t{constructor(e){this._popupElement=document.querySelector(e),this._popupClose=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeModalEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeModalEscape)}_closeModalEscape=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class s extends t{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._popupSubmit=this._popupElement.querySelector(".modal__button")}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setSubmitText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._popupSubmit.textContent=e?t:"Save"}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues())}))}close(){this._popupForm.reset(),super.close()}}var i=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput(this._inputEls))return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState(this._inputEls)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};const r=document.querySelector("#profile-edit-modal"),n=document.querySelector("#profile-edit-button"),o=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__image-button"),l=document.querySelector("#profile__image-edit"),c=(document.querySelector(".profile__image"),r.querySelector(".modal__form")),d=document.querySelector("#modal-input-name"),h=document.querySelector("#modal-input-description"),u=document.querySelector("#add-new-card"),_={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},m=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s,this._authorization=s.authorization,this._contentType=s["Content-Type"]}_checkResponseOk(e){if(e.ok)return e.json();Promise.reject(`Erorr: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponseOk)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponseOk)}profileUpdate(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",body:JSON.stringify({name:e.title,about:e.about}),headers:this._headers}).then(this._checkResponseOk)}addCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",body:JSON.stringify({name:e,link:t}),headers:this._headers}).then(this._checkResponseOk)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponseOk)}cardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponseOk)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponseOk)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponseOk)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"5f2b588a-250e-4922-b74a-306ecb82bfe6","Content-Type":"application/json"}}),p=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){console.log("CARDS",e),e.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({renderer:v},".cards__list");function v(t){const s=new e(i=t,"#card-template",{handleImageClick:()=>S.open(i),handleDeleteClick:b,handleCardLike:I}).getCard();var i;p.addItem(s)}const S=new class extends t{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image-preview"),this._caption=document.querySelector(".modal__image-preview-title")}open(e){super.open(),this._image.src=e.link,this._image.alt=`Photo of ${e.name}`,this._caption.textContent=e.name}}("#preview-image-modal");S.setEventListeners();const E=new class extends t{constructor(e){super(e),this._popupConfirm=this._popupElement.querySelector(".modal__form"),this._popupSubmit=this._popupElement.querySelector(".modal__button-delete")}setSubmitAction(e){this._handleFormSubmit=e}setSubmitText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._popupSubmit.textContent=e?t:"Yes"}setEventListeners(){this._popupConfirm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()})),super.setEventListeners()}}("#card__delete-modal");function b(e){E.open(),E.setSubmitAction((()=>{E.setSubmitText(!0,"Deleting..."),m.deleteCard(e.id).then((()=>{E.close(),e.removeCard()})).catch((e=>console.log(e))).finally((()=>E.setSubmitText(!1)))}))}E.setEventListeners();const k=new s("#add-new-card",(function(e){const t=e.name,s=e.url;k.setSubmitText(!0,"Saving..."),m.addCard(t,s).then((e=>{v(e),k.close()})).catch((e=>{console.log(e)})).finally((()=>k.setSubmitText(!1)))})),f=new s("#profile-edit-modal",(function(e){f.setSubmitText(!0,"Saving..."),m.profileUpdate(e).then((()=>{q.setUserInfo(e),f.close()})).catch((e=>{console.log(e)})).finally((()=>f.setSubmitText(!1)))})),g=new s("#profile__image-edit",(function(e){g.setSubmitText(!0,"Loading..."),m.updateProfileAvatar(e.url).then((e=>{q.setUserInfo(e),g.close()})).catch((e=>{console.log(e)})).finally((()=>g.setSubmitText(!1)))}));f.setEventListeners(),g.setEventListeners(),k.setEventListeners();const L=new i(_,c),y=new i(_,l),C=new i(_,u);function I(e){e.isLiked?m.removeLike(e.getId()).then((t=>{e.setLikeStatus(t.isLiked)})).catch((e=>{console.log(e)})):m.cardLike(e.getId()).then((t=>{e.setLikeStatus(t.isLiked)})).catch((e=>{console.log(e)}))}L.enableValidation(),y.enableValidation(),C.enableValidation();const q=new class{constructor(e,t,s){this._name=document.querySelector(e),this._title=document.querySelector(t),this._userAvatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,title:this._title.textContent}}setUserInfo(e){e.title&&(this._name.textContent=e.title),this._title.textContent=e.about,e.avatar&&(this._userAvatar.src=e.avatar)}}(".profile__title",".profile__description",".profile__image");n.addEventListener("click",(()=>{const e=q.getUserInfo();d.value=e.name,h.value=e.title,f.open()})),o.addEventListener("click",(()=>{C.toggleButtonState(),k.open()})),a.addEventListener("click",(()=>{y.toggleButtonState(),g.open()})),Promise.all([m.getUserInfo(),m.getInitialCards()]).then((e=>{let[t,s]=e;q.setUserInfo({about:t.about,title:t.name,avatar:t.avatar}),p.renderItems(s)})).catch((e=>{console.log(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxNQUMzQnJJLEVBQUs0SSxTQUFRdEksS0FBS2dMLFlBQVl4QixJQUFNOUosRUFBSzRJLE9BRS9DLEdMdUpBLGtCQUNBLHdCQUNBLG1CQUlGekMsRUFBa0I5RSxpQkFBaUIsU0FBUyxLQUMxQyxNQUFNa0ssRUFBY1osRUFBUzdDLGNBQzdCdEIsRUFBaUIzQyxNQUFRMEgsRUFBWS9LLEtBQ3JDaUcsRUFBd0I1QyxNQUFRMEgsRUFBWW5ELE1BQzVDc0MsRUFBWWpJLE1BQU0sSUFHcEIyRCxFQUFpQi9FLGlCQUFpQixTQUFTLEtBQ3pDNEosRUFBa0JyRixvQkFDbEI2RSxFQUFlaEksTUFBTSxJQUd2QjRELEVBQWlCaEYsaUJBQWlCLFNBQVMsS0FDekMySixFQUFvQnBGLG9CQUNwQmlGLEVBQWVwSSxNQUFNLElBSXZCK0UsUUFBUWdFLElBQUksQ0FBQzVFLEVBQUlrQixjQUFlbEIsRUFBSWUsb0JBQ2pDRSxNQUFLM0gsSUFBbUIsSUFBakJGLEVBQU15TCxHQUFNdkwsRUFDbEJ5SyxFQUFTQyxZQUFZLENBQ25CdkMsTUFBT3JJLEVBQUtxSSxNQUNaRCxNQUFPcEksRUFBS1EsS0FDWm9JLE9BQVE1SSxFQUFLNEksU0FFZkMsRUFBWUssWUFBWXVDLEVBQU0sSUFFL0JuQixPQUFPQyxJQUNObkIsUUFBUUMsSUFBSWtCLEVBQUksRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCB7IGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVDYXJkTGlrZSB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuaXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuaWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvL1wiLmNhcmRfX2xpa2UtYnV0dG9uXCJcclxuICAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMpKTsgICAgXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgLy8gX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gIC8vICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAvLyAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAvLyAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgLy8gfVxyXG5cclxuICBzZXRMaWtlU3RhdHVzKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCl7XHJcbiAgICBpZih0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKS5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIC8vZ2V0IHRoZSBjYXJkIHZpZXdcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gICAgLy8gcmV0dXJuIHRoZSBjYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmlkO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgLy9vcGVucyBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU1vZGFsRXNjYXBlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy9jbG9zZXMgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VNb2RhbEVzY2FwZSk7XHJcbiAgfVxyXG5cclxuICBfY2xvc2VNb2RhbEVzY2FwZSA9IChldnQpID0+IHtcclxuICAgIC8vbGlzdGVucyBmb3IgZXNjIGJ1dHRvblxyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9zZXRzIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwU3VibWl0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBkYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0VGV4dChzdWJtaXQsIHN1Ym1pdFRleHQgPSBcIlNhdmluZy4uLlwiKXtcclxuICAgIGlmIChzdWJtaXQpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFN1Ym1pdC50ZXh0Q29udGVudCA9IHN1Ym1pdFRleHQ7XHJcbiAgICB9IFxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxufVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG5cclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dEVscyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsIi8vSU5JVElBTCBDQVJEU1xyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiWW9zZW1pdCBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWlzZXNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxyXG4gICAgfSxcclxuICBdO1xyXG5cclxuICAvL1Byb2ZpbGUgUXVlcmllc1xyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlUGljQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVQaWNNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcclxuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuXHJcbi8vTW9kYWwgUXVlcmllc1xyXG5jb25zdCBwcm9maWxlTW9kYWxGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbnB1dC1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtaW5wdXQtZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5cclxuLy9DYXJkIFF1ZXJpZXNcclxuY29uc3QgYWRkTmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LWNhcmRcIik7XHJcblxyXG4vL1ZBTElEQVRJT05cclxuY29uc3QgY29uZmlnID0gIHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQge3Byb2ZpbGVFZGl0TW9kYWwsIHByb2ZpbGVFZGl0QnV0dG9uLCBhZGROZXdDYXJkQnV0dG9uLCBwcm9maWxlUGljQnV0dG9uLCBwcm9maWxlUGljTW9kYWwsIHByb2ZpbGVJbWFnZSxcclxuICBwcm9maWxlTW9kYWxGb3JtLCBwcm9maWxlTW9kYWxOYW1lLCBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbiwgYWRkTmV3Q2FyZE1vZGFsLCBjb25maWd9IiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIGFkZE5ld0NhcmRCdXR0b24sXHJcbiAgcHJvZmlsZVBpY0J1dHRvbixcclxuICBwcm9maWxlUGljTW9kYWwsXHJcbiAgcHJvZmlsZUltYWdlLFxyXG4gIHByb2ZpbGVNb2RhbEZvcm0sXHJcbiAgcHJvZmlsZU1vZGFsTmFtZSxcclxuICBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbixcclxuICBhZGROZXdDYXJkTW9kYWwsXHJcbiAgY29uZmlnLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vQVBJIEVWRU5UU1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI1ZjJiNTg4YS0yNTBlLTQ5MjItYjc0YS0zMDZlY2I4MmJmZTZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9TRUNUSU9OIFJFTkRFUkVSXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IGdlbmVyYXRlQ2FyZCxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG4vL1JFTkRFUiBDQVJEXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIHtcclxuICAgIGhhbmRsZUltYWdlQ2xpY2s6ICgpID0+IGltYWdlUG9wdXAub3BlbihkYXRhKSxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlQ2FyZExpa2UsXHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0Q2FyZCgpO1xyXG59XHJcblxyXG4vL0lNQUdFIFBPUFVQXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9ERUxFVEUgQ0FSRCBQT1BVUFxyXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI2NhcmRfX2RlbGV0ZS1tb2RhbFwiKTtcclxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgIGRlbGV0ZUNhcmRQb3B1cC5zZXRTdWJtaXRUZXh0KHRydWUsIFwiRGVsZXRpbmcuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdFRleHQoZmFsc2UpKTtcclxuICB9KTtcclxufVxyXG5cclxuLy9GT1JNIFBPUFVQXHJcbmNvbnN0IG9wZW5JbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLW5ldy1jYXJkXCIsXHJcbiAgaGFuZGxlSW1hZ2VGb3JtU3VibWl0XHJcbik7XHJcbmNvbnN0IGVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsIGhhbmRsZUZvcm1TdWJtaXQpO1xyXG5jb25zdCBwcm9maWxlUGljRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGVfX2ltYWdlLWVkaXRcIixcclxuICBwcm9maWxlUGljRWRpdFN1Ym1pdFxyXG4pO1xyXG5cclxuZWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZVBpY0VkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxub3BlbkltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlTW9kYWxGb3JtKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZVBpY01vZGFsKTtcclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZE5ld0NhcmRNb2RhbCk7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL0ZPUk0gU1VCTUlUXHJcbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIGVkaXRQcm9maWxlLnNldFN1Ym1pdFRleHQodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XHJcbiAgYXBpXHJcbiAgICAucHJvZmlsZVVwZGF0ZShkYXRhKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuICAgICAgZWRpdFByb2ZpbGUuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IGVkaXRQcm9maWxlLnNldFN1Ym1pdFRleHQoZmFsc2UpKTtcclxufVxyXG5cclxuLy8gLy9JTUFHRSBTVUJNSVRcclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VGb3JtU3VibWl0KGRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gZGF0YS5uYW1lO1xyXG4gIGNvbnN0IGxpbmsgPSBkYXRhLnVybDtcclxuICBvcGVuSW1hZ2VQb3B1cC5zZXRTdWJtaXRUZXh0KHRydWUsIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQobmFtZSwgbGluaylcclxuICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgIGdlbmVyYXRlQ2FyZChjYXJkKTtcclxuICAgICAgb3BlbkltYWdlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IG9wZW5JbWFnZVBvcHVwLnNldFN1Ym1pdFRleHQoZmFsc2UpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHJvZmlsZVBpY0VkaXRTdWJtaXQoZGF0YSkge1xyXG4gIHByb2ZpbGVQaWNFZGl0LnNldFN1Ym1pdFRleHQodHJ1ZSwgXCJMb2FkaW5nLi4uXCIpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVBdmF0YXIoZGF0YS51cmwpXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuICAgICAgcHJvZmlsZVBpY0VkaXQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHByb2ZpbGVQaWNFZGl0LnNldFN1Ym1pdFRleHQoZmFsc2UpKTtcclxufVxyXG5cclxuLy9JTUFHRSBMSUtFXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKGNhcmQpIHtcclxuICBjb25zdCBuZXdMaWtlU3RhdHVzID0gIWNhcmQuaXNMaWtlZDtcclxuICBpZiAobmV3TGlrZVN0YXR1cykge1xyXG4gICAgYXBpXHJcbiAgICAgIC5jYXJkTGlrZShjYXJkLmdldElkKCkpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLnNldExpa2VTdGF0dXMocmVzLmlzTGlrZWQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLnJlbW92ZUxpa2UoY2FyZC5nZXRJZCgpKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlU3RhdHVzKHJlcy5pc0xpa2VkKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vUFJPRklMRSBFRElUIFBPUFVQXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG4gIFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBcIi5wcm9maWxlX19pbWFnZVwiXHJcbik7XHJcblxyXG4vL0VWRU5UIExJU1RFTkVSU1xyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTW9kYWxOYW1lLnZhbHVlID0gY3VycmVudFVzZXIubmFtZTtcclxuICBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbi52YWx1ZSA9IGN1cnJlbnRVc2VyLnRpdGxlO1xyXG4gIGVkaXRQcm9maWxlLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBvcGVuSW1hZ2VQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZVBpY0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBwcm9maWxlUGljRWRpdC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy9BUEkgQ0FMTFNcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbZGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICB0aXRsZTogZGF0YS5uYW1lLFxyXG4gICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgfSk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl07XHJcbiAgfVxyXG5cclxuICAvL0NoZWNrIGlmIEpTT04gb2JqZWN0IG9rXHJcbiAgX2NoZWNrUmVzcG9uc2VPayhyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBQcm9taXNlLnJlamVjdChgRXJvcnI6ICR7cmVzLnN0YXR1c31gKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9HZXQgaW5pdGlhbCBjYXJkcyBmcm9tIFVSTFxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZU9rKVxyXG5cclxuICB9XHJcblxyXG4gIC8vR2V0IHVzZXIgaW5mb1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlT2spXHJcblxyXG4gIH1cclxuXHJcbiAgLy9Qcm9maWxlIFVwZGF0ZVxyXG4gIHByb2ZpbGVVcGRhdGUoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEudGl0bGUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlT2spXHJcblxyXG4gIH1cclxuXHJcbiAgLy9BZGRpbmcgQ2FyZHNcclxuICBhZGRDYXJkKG5hbWUsIGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VPaylcclxuXHJcbiAgfVxyXG5cclxuICAvL0RlbGV0ZWluZyBDYXJkc1xyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlT2spXHJcblxyXG4gIH1cclxuXHJcbiAgLy9MaWtlIEJ1dHRvblxyXG4gIGNhcmRMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZU9rKVxyXG5cclxuICB9XHJcblxyXG4gIC8vUmVtb3ZlIExpa2UgZnJvbSBjYXJkXHJcbiAgcmVtb3ZlTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VPaylcclxuXHJcbiAgfVxyXG5cclxuICAvL1Byb2ZpbGUgcGljdHVyZSB1cGRhdGVcclxuICB1cGRhdGVQcm9maWxlQXZhdGFyKHVybCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHVybCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VPaylcclxuXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkNBUkRTXCIsIGl0ZW1zKTtcclxuICAgIC8vIHVzZSB0aGlzLl9yZW5kZXJlciB0byBjcmVhdGUgdGhlIGVsZW1lbnRzIGZvciByZW5kZXJpbmdcclxuICAgIGl0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICAvLyB0YWtlIHRoZSBpdGVtIGFuZCByZW5kZXIgaXQgaW50byB0aGlzLl9lbGVtZW50XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlldy10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7ZGF0YS5uYW1lfWA7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwQ29uZmlybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBTdWJtaXQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2J1dHRvbi1kZWxldGVcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRUZXh0KHN1Ym1pdCwgc3VibWl0VGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChzdWJtaXQpIHtcclxuICAgICAgdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQgPSBzdWJtaXRUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQgPSBcIlllc1wiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cENvbmZpcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlcmluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCB1c2VyQXZhdGFyKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBpbmZvO1xyXG4gICAgLy9yZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHVzZXIuXHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICBpZiAoZGF0YS50aXRsZSkgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEudGl0bGU7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICBpZiAoZGF0YS5hdmF0YXIpIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICAvL3Rha3NlcyBhIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2UuXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiX3JlZiIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUNhcmRMaWtlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsImlzTGlrZWQiLCJpZCIsIl9pZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVDYXJkTGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0TGlrZVN0YXR1cyIsIl9yZW5kZXJMaWtlcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInJlbW92ZUNhcmQiLCJnZXRDYXJkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRJbWFnZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwidGV4dENvbnRlbnQiLCJnZXRJZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfcG9wdXBDbG9zZSIsIm9wZW4iLCJfY2xvc2VNb2RhbEVzY2FwZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwic2V0U3VibWl0VGV4dCIsInN1Ym1pdCIsInN1Ym1pdFRleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJyZXNldCIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWwiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbHMiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZVBpY0J1dHRvbiIsInByb2ZpbGVQaWNNb2RhbCIsInByb2ZpbGVNb2RhbEZvcm0iLCJwcm9maWxlTW9kYWxOYW1lIiwicHJvZmlsZU1vZGFsRGVzY3JpcHRpb24iLCJhZGROZXdDYXJkTW9kYWwiLCJmb3JtU2VsZWN0b3IiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJfY2hlY2tSZXNwb25zZU9rIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwicHJvZmlsZVVwZGF0ZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJhYm91dCIsImFkZENhcmQiLCJkZWxldGVDYXJkIiwiY2FyZExpa2UiLCJyZW1vdmVMaWtlIiwidXBkYXRlUHJvZmlsZUF2YXRhciIsInVybCIsImF2YXRhciIsImNhcmRTZWN0aW9uIiwic2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiY29uc29sZSIsImxvZyIsImFkZEl0ZW0iLCJpdGVtIiwicHJlcGVuZCIsImdlbmVyYXRlQ2FyZCIsImNhcmRFbGVtZW50IiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwic3JjIiwiYWx0IiwiZGVsZXRlQ2FyZFBvcHVwIiwiX3BvcHVwQ29uZmlybSIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImUiLCJjYXJkIiwiY2F0Y2giLCJlcnIiLCJmaW5hbGx5Iiwib3BlbkltYWdlUG9wdXAiLCJlZGl0UHJvZmlsZSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwcm9maWxlUGljRWRpdCIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsInVzZXJOYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsInVzZXJBdmF0YXIiLCJfdGl0bGUiLCJfdXNlckF2YXRhciIsImN1cnJlbnRVc2VyIiwiYWxsIiwiY2FyZHMiXSwic291cmNlUm9vdCI6IiJ9